{"ast":null,"code":"import _objectSpread from\"C:/Users/yupoh/Desktop/cotton-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"C:/Users/yupoh/Desktop/cotton-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _taggedTemplateLiteral from\"C:/Users/yupoh/Desktop/cotton-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _defineProperty from\"C:/Users/yupoh/Desktop/cotton-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";var _alertTypeMap,_templateObject;import React,{useCallback,useEffect,useRef}from\"react\";import{CSSTransition}from\"react-transition-group\";import styled from\"styled-components\";import{Alert,alertVariants}from\"../../components/Alert\";import{Text}from\"../../components/Text\";import ToastAction from\"./ToastAction\";import{types}from\"./types\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var alertTypeMap=(_alertTypeMap={},_defineProperty(_alertTypeMap,types.INFO,alertVariants.INFO),_defineProperty(_alertTypeMap,types.SUCCESS,alertVariants.SUCCESS),_defineProperty(_alertTypeMap,types.DANGER,alertVariants.DANGER),_defineProperty(_alertTypeMap,types.WARNING,alertVariants.WARNING),_alertTypeMap);var StyledToast=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  right: 16px;\\n  position: fixed;\\n  max-width: calc(100% - 32px);\\n  transition: all 250ms ease-in;\\n  width: 100%;\\n\\n  \",\" {\\n    max-width: 400px;\\n  }\\n\"])),function(_ref){var theme=_ref.theme;return theme.mediaQueries.sm;});var Toast=function Toast(_ref2){var toast=_ref2.toast,onRemove=_ref2.onRemove,style=_ref2.style,ttl=_ref2.ttl,props=_objectWithoutProperties(_ref2,[\"toast\",\"onRemove\",\"style\",\"ttl\"]);var timer=useRef();var ref=useRef(null);var removeHandler=useRef(onRemove);var id=toast.id,title=toast.title,description=toast.description,type=toast.type,action=toast.action;var handleRemove=useCallback(function(){return removeHandler.current(id);},[id,removeHandler]);var handleMouseEnter=function handleMouseEnter(){clearTimeout(timer.current);};var handleMouseLeave=function handleMouseLeave(){if(timer.current){clearTimeout(timer.current);}timer.current=window.setTimeout(function(){handleRemove();},ttl);};useEffect(function(){if(timer.current){clearTimeout(timer.current);}timer.current=window.setTimeout(function(){handleRemove();},ttl);return function(){clearTimeout(timer.current);};},[timer,ttl,handleRemove]);return/*#__PURE__*/_jsx(CSSTransition,_objectSpread(_objectSpread({nodeRef:ref,timeout:250,style:style},props),{},{children:/*#__PURE__*/_jsx(StyledToast,{ref:ref,onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,children:/*#__PURE__*/_jsx(Alert,{title:title,variant:alertTypeMap[type],onClick:handleRemove,children:action?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Text,{as:\"p\",mb:\"8px\",children:description}),/*#__PURE__*/_jsx(ToastAction,{action:action})]}):description})})}));};export default Toast;","map":{"version":3,"sources":["C:/Users/yupoh/Desktop/cotton-frontend/src/uikit/widgets/Toast/Toast.tsx"],"names":["React","useCallback","useEffect","useRef","CSSTransition","styled","Alert","alertVariants","Text","ToastAction","types","alertTypeMap","INFO","SUCCESS","DANGER","WARNING","StyledToast","div","theme","mediaQueries","sm","Toast","toast","onRemove","style","ttl","props","timer","ref","removeHandler","id","title","description","type","action","handleRemove","current","handleMouseEnter","clearTimeout","handleMouseLeave","window","setTimeout"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef } from \"react\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport styled from \"styled-components\";\r\nimport { Alert, alertVariants } from \"../../components/Alert\";\r\nimport { Text } from \"../../components/Text\";\r\nimport ToastAction from \"./ToastAction\";\r\nimport { ToastProps, types } from \"./types\";\r\n\r\nconst alertTypeMap = {\r\n  [types.INFO]: alertVariants.INFO,\r\n  [types.SUCCESS]: alertVariants.SUCCESS,\r\n  [types.DANGER]: alertVariants.DANGER,\r\n  [types.WARNING]: alertVariants.WARNING,\r\n};\r\n\r\nconst StyledToast = styled.div`\r\n  right: 16px;\r\n  position: fixed;\r\n  max-width: calc(100% - 32px);\r\n  transition: all 250ms ease-in;\r\n  width: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    max-width: 400px;\r\n  }\r\n`;\r\n\r\nconst Toast: React.FC<ToastProps> = ({ toast, onRemove, style, ttl, ...props }) => {\r\n  const timer = useRef<number>();\r\n  const ref = useRef(null);\r\n  const removeHandler = useRef(onRemove);\r\n  const { id, title, description, type, action } = toast;\r\n\r\n  const handleRemove = useCallback(() => removeHandler.current(id), [id, removeHandler]);\r\n\r\n  const handleMouseEnter = () => {\r\n    clearTimeout(timer.current);\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    if (timer.current) {\r\n      clearTimeout(timer.current);\r\n    }\r\n\r\n    timer.current = window.setTimeout(() => {\r\n      handleRemove();\r\n    }, ttl);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (timer.current) {\r\n      clearTimeout(timer.current);\r\n    }\r\n\r\n    timer.current = window.setTimeout(() => {\r\n      handleRemove();\r\n    }, ttl);\r\n\r\n    return () => {\r\n      clearTimeout(timer.current);\r\n    };\r\n  }, [timer, ttl, handleRemove]);\r\n\r\n  return (\r\n    <CSSTransition nodeRef={ref} timeout={250} style={style} {...props}>\r\n      <StyledToast ref={ref} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\r\n        <Alert title={title} variant={alertTypeMap[type]} onClick={handleRemove}>\r\n          {action ? (\r\n            <>\r\n              <Text as=\"p\" mb=\"8px\">\r\n                {description}\r\n              </Text>\r\n              <ToastAction action={action} />\r\n            </>\r\n          ) : (\r\n            description\r\n          )}\r\n        </Alert>\r\n      </StyledToast>\r\n    </CSSTransition>\r\n  );\r\n};\r\n\r\nexport default Toast;\r\n"]},"metadata":{},"sourceType":"module"}