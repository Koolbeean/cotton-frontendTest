{"ast":null,"code":"import _slicedToArray from\"C:/Users/yupoh/Desktop/cotton-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/Users/yupoh/Desktop/cotton-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useState,useEffect,useRef}from\"react\";import styled from\"styled-components\";import throttle from\"lodash/throttle\";import Overlay from\"../../components/Overlay/Overlay\";import{Flex}from\"../../components/Flex\";import{useMatchBreakpoints}from\"../../hooks\";import Logo from\"./Logo\";import Panel from\"./Panel\";import UserBlock from\"./UserBlock\";import{MENU_HEIGHT,SIDEBAR_WIDTH_REDUCED,SIDEBAR_WIDTH_FULL}from\"./config\";import Avatar from\"./Avatar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: relative;\\n  width: 100%;\\n\"])));var StyledNav=styled.nav(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: \",\";\\n  left: 0;\\n  transition: top 0.2s;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding-left: 8px;\\n  padding-right: 16px;\\n  width: 100%;\\n  height: \",\"px;\\n  background-color: \",\";\\n  border-bottom: solid 0px rgba(133, 133, 133, 0.1);\\n  z-index: 20;\\n  transform: translate3d(0, 0, 0);\\n\"])),function(_ref){var showMenu=_ref.showMenu;return showMenu?0:\"-\".concat(MENU_HEIGHT,\"px\");},MENU_HEIGHT,function(_ref2){var theme=_ref2.theme;return theme.nav.background;});var BodyWrapper=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  position: relative;\\n  display: flex;\\n\"])));var Inner=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  flex-grow: 1;\\n  margin-top: \",\";\\n  transition: margin-top 0.2s;\\n  transform: translate3d(0, 0, 0);\\n  \",\" {\\n    margin-left: \",\";\\n  }\\n\"])),function(_ref3){var showMenu=_ref3.showMenu;return showMenu?\"\".concat(MENU_HEIGHT,\"px\"):0;},function(_ref4){var theme=_ref4.theme;return theme.mediaQueries.nav;},function(_ref5){var isPushed=_ref5.isPushed;return\"\".concat(isPushed?SIDEBAR_WIDTH_FULL:SIDEBAR_WIDTH_REDUCED,\"px\");});var MobileOnlyOverlay=styled(Overlay)(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  height: 100%;\\n\\n  \",\" {\\n    display: none;\\n  }\\n\"])),function(_ref6){var theme=_ref6.theme;return theme.mediaQueries.nav;});var Menu=function Menu(_ref7){var _homeLink$href;var account=_ref7.account,login=_ref7.login,logout=_ref7.logout,isDark=_ref7.isDark,toggleTheme=_ref7.toggleTheme,langs=_ref7.langs,setLang=_ref7.setLang,currentLang=_ref7.currentLang,cakePriceUsd=_ref7.cakePriceUsd,links=_ref7.links,priceLink=_ref7.priceLink,profile=_ref7.profile,children=_ref7.children;var _useMatchBreakpoints=useMatchBreakpoints(),isXl=_useMatchBreakpoints.isXl;var isMobile=isXl===false;var _useState=useState(!isMobile),_useState2=_slicedToArray(_useState,2),isPushed=_useState2[0],setIsPushed=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),showMenu=_useState4[0],setShowMenu=_useState4[1];var refPrevOffset=useRef(window.pageYOffset);useEffect(function(){var handleScroll=function handleScroll(){var currentOffset=window.pageYOffset;var isBottomOfPage=window.document.body.clientHeight===currentOffset+window.innerHeight;var isTopOfPage=currentOffset===0;// Always show the menu when user reach the top\nif(isTopOfPage){setShowMenu(true);}// Avoid triggering anything at the bottom because of layout shift\nelse if(!isBottomOfPage){if(currentOffset<refPrevOffset.current){// Has scroll up\nsetShowMenu(true);}else{// Has scroll down\nsetShowMenu(false);}}refPrevOffset.current=currentOffset;};var throttledHandleScroll=throttle(handleScroll,200);window.addEventListener(\"scroll\",throttledHandleScroll);return function(){window.removeEventListener(\"scroll\",throttledHandleScroll);};},[]);// Find the home link if provided\nvar homeLink=links.find(function(link){return link.label===\"Home\";});return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(StyledNav,{showMenu:showMenu,children:[/*#__PURE__*/_jsx(Logo,{isPushed:isPushed,togglePush:function togglePush(){return setIsPushed(function(prevState){return!prevState;});},isDark:isDark,href:(_homeLink$href=homeLink===null||homeLink===void 0?void 0:homeLink.href)!==null&&_homeLink$href!==void 0?_homeLink$href:\"/\"}),/*#__PURE__*/_jsxs(Flex,{children:[/*#__PURE__*/_jsx(UserBlock,{account:account,login:login,logout:logout}),profile&&/*#__PURE__*/_jsx(Avatar,{profile:profile})]})]}),/*#__PURE__*/_jsxs(BodyWrapper,{children:[/*#__PURE__*/_jsx(Panel,{isPushed:isPushed,isMobile:isMobile,showMenu:showMenu,isDark:isDark,toggleTheme:toggleTheme,langs:langs,setLang:setLang,currentLang:currentLang,cakePriceUsd:cakePriceUsd,pushNav:setIsPushed,links:links,priceLink:priceLink}),/*#__PURE__*/_jsx(Inner,{isPushed:isPushed,showMenu:showMenu,children:children}),/*#__PURE__*/_jsx(MobileOnlyOverlay,{show:isPushed,onClick:function onClick(){return setIsPushed(false);},role:\"presentation\"})]})]});};export default Menu;","map":{"version":3,"sources":["C:/Users/yupoh/Desktop/cotton-frontend/src/uikit/widgets/Menu/Menu.tsx"],"names":["React","useState","useEffect","useRef","styled","throttle","Overlay","Flex","useMatchBreakpoints","Logo","Panel","UserBlock","MENU_HEIGHT","SIDEBAR_WIDTH_REDUCED","SIDEBAR_WIDTH_FULL","Avatar","Wrapper","div","StyledNav","nav","showMenu","theme","background","BodyWrapper","Inner","mediaQueries","isPushed","MobileOnlyOverlay","Menu","account","login","logout","isDark","toggleTheme","langs","setLang","currentLang","cakePriceUsd","links","priceLink","profile","children","isXl","isMobile","setIsPushed","setShowMenu","refPrevOffset","window","pageYOffset","handleScroll","currentOffset","isBottomOfPage","document","body","clientHeight","innerHeight","isTopOfPage","current","throttledHandleScroll","addEventListener","removeEventListener","homeLink","find","link","label","prevState","href"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport throttle from \"lodash/throttle\";\r\nimport Overlay from \"../../components/Overlay/Overlay\";\r\nimport { Flex } from \"../../components/Flex\";\r\nimport { useMatchBreakpoints } from \"../../hooks\";\r\nimport Logo from \"./Logo\";\r\nimport Panel from \"./Panel\";\r\nimport UserBlock from \"./UserBlock\";\r\nimport { NavProps } from \"./types\";\r\nimport { MENU_HEIGHT, SIDEBAR_WIDTH_REDUCED, SIDEBAR_WIDTH_FULL } from \"./config\";\r\nimport Avatar from \"./Avatar\";\r\n\r\nconst Wrapper = styled.div`\r\n  position: relative;\r\n  width: 100%;\r\n`;\r\n\r\nconst StyledNav = styled.nav<{ showMenu: boolean }>`\r\n  position: fixed;\r\n  top: ${({ showMenu }) => (showMenu ? 0 : `-${MENU_HEIGHT}px`)};\r\n  left: 0;\r\n  transition: top 0.2s;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-left: 8px;\r\n  padding-right: 16px;\r\n  width: 100%;\r\n  height: ${MENU_HEIGHT}px;\r\n  background-color: ${({ theme }) => theme.nav.background};\r\n  border-bottom: solid 0px rgba(133, 133, 133, 0.1);\r\n  z-index: 20;\r\n  transform: translate3d(0, 0, 0);\r\n`;\r\n\r\nconst BodyWrapper = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n`;\r\n\r\nconst Inner = styled.div<{ isPushed: boolean; showMenu: boolean }>`\r\n  flex-grow: 1;\r\n  margin-top: ${({ showMenu }) => (showMenu ? `${MENU_HEIGHT}px` : 0)};\r\n  transition: margin-top 0.2s;\r\n  transform: translate3d(0, 0, 0);\r\n  ${({ theme }) => theme.mediaQueries.nav} {\r\n    margin-left: ${({ isPushed }) => `${isPushed ? SIDEBAR_WIDTH_FULL : SIDEBAR_WIDTH_REDUCED}px`};\r\n  }\r\n`;\r\n\r\nconst MobileOnlyOverlay = styled(Overlay)`\r\n  position: fixed;\r\n  height: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.nav} {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nconst Menu: React.FC<NavProps> = ({\r\n  account,\r\n  login,\r\n  logout,\r\n  isDark,\r\n  toggleTheme,\r\n  langs,\r\n  setLang,\r\n  currentLang,\r\n  cakePriceUsd,\r\n  links,\r\n  priceLink,\r\n  profile,\r\n  children,\r\n}) => {\r\n  const { isXl } = useMatchBreakpoints();\r\n  const isMobile = isXl === false;\r\n  const [isPushed, setIsPushed] = useState(!isMobile);\r\n  const [showMenu, setShowMenu] = useState(true);\r\n  const refPrevOffset = useRef(window.pageYOffset);\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      const currentOffset = window.pageYOffset;\r\n      const isBottomOfPage = window.document.body.clientHeight === currentOffset + window.innerHeight;\r\n      const isTopOfPage = currentOffset === 0;\r\n      // Always show the menu when user reach the top\r\n      if (isTopOfPage) {\r\n        setShowMenu(true);\r\n      }\r\n      // Avoid triggering anything at the bottom because of layout shift\r\n      else if (!isBottomOfPage) {\r\n        if (currentOffset < refPrevOffset.current) {\r\n          // Has scroll up\r\n          setShowMenu(true);\r\n        } else {\r\n          // Has scroll down\r\n          setShowMenu(false);\r\n        }\r\n      }\r\n      refPrevOffset.current = currentOffset;\r\n    };\r\n    const throttledHandleScroll = throttle(handleScroll, 200);\r\n\r\n    window.addEventListener(\"scroll\", throttledHandleScroll);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", throttledHandleScroll);\r\n    };\r\n  }, []);\r\n\r\n  // Find the home link if provided\r\n  const homeLink = links.find((link) => link.label === \"Home\");\r\n\r\n  return (\r\n    <Wrapper>\r\n      <StyledNav showMenu={showMenu}>\r\n        <Logo\r\n          isPushed={isPushed}\r\n          togglePush={() => setIsPushed((prevState: boolean) => !prevState)}\r\n          isDark={isDark}\r\n          href={homeLink?.href ?? \"/\"}\r\n        />\r\n        <Flex>\r\n          <UserBlock account={account} login={login} logout={logout} />\r\n          {profile && <Avatar profile={profile} />}\r\n        </Flex>\r\n      </StyledNav>\r\n      <BodyWrapper>\r\n        <Panel\r\n          isPushed={isPushed}\r\n          isMobile={isMobile}\r\n          showMenu={showMenu}\r\n          isDark={isDark}\r\n          toggleTheme={toggleTheme}\r\n          langs={langs}\r\n          setLang={setLang}\r\n          currentLang={currentLang}\r\n          cakePriceUsd={cakePriceUsd}\r\n          pushNav={setIsPushed}\r\n          links={links}\r\n          priceLink={priceLink}\r\n        />\r\n        <Inner isPushed={isPushed} showMenu={showMenu}>\r\n          {children}\r\n        </Inner>\r\n        <MobileOnlyOverlay show={isPushed} onClick={() => setIsPushed(false)} role=\"presentation\" />\r\n      </BodyWrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n"]},"metadata":{},"sourceType":"module"}