{"ast":null,"code":"import _objectSpread from\"C:/Users/yupoh/Desktop/cotton-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useCallback,useEffect}from\"react\";import debounce from\"lodash/debounce\";var defaultParticleOptions={size:30,distance:500};var createParticle=function createParticle(x,y,imgSrc){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _defaultParticleOptio=_objectSpread(_objectSpread({},defaultParticleOptions),options),size=_defaultParticleOptio.size,distance=_defaultParticleOptio.distance;var particle=document.createElement(\"particle\");document.body.appendChild(particle);var width=Math.floor(Math.random()*size+8);var height=width;var destinationX=(Math.random()-0.5)*distance;var destinationY=(Math.random()-0.5)*distance;var rotation=Math.random()*520;var delay=Math.random()*200;particle.style.backgroundRepeat=\"no-repeat\";particle.style.backgroundSize=\"contain\";particle.style.backgroundImage=\"url(\".concat(imgSrc,\")\");particle.style.left=\"0\";particle.style.top=\"0\";particle.style.opacity=\"0\";particle.style.pointerEvents=\"none\";particle.style.position=\"fixed\";particle.style.width=\"\".concat(width,\"px\");particle.style.height=\"\".concat(height,\"px\");var animation=particle.animate([{transform:\"translate(-50%, -50%) translate(\".concat(x,\"px, \").concat(y,\"px) rotate(0deg)\"),opacity:1},{transform:\"translate(-50%, -50%) translate(\".concat(x+destinationX,\"px, \").concat(y+destinationY,\"px) rotate(\").concat(rotation,\"deg)\"),opacity:0}],{duration:Math.random()*1000+5000,easing:\"cubic-bezier(0, .9, .57, 1)\",delay:delay});animation.onfinish=function(){particle.remove();};};var defaultOptions={numberOfParticles:30,debounceDuration:200,particleOptions:{}};/**\r\n * @see https://css-tricks.com/playing-with-particles-using-the-web-animations-api/\r\n */var useParticleBurst=function useParticleBurst(options){var _defaultOptions$optio=_objectSpread(_objectSpread({},defaultOptions),options),selector=_defaultOptions$optio.selector,numberOfParticles=_defaultOptions$optio.numberOfParticles,debounceDuration=_defaultOptions$optio.debounceDuration,imgSrc=_defaultOptions$optio.imgSrc,disableWhen=_defaultOptions$optio.disableWhen,particleOptions=_defaultOptions$optio.particleOptions;var makeListener=useCallback(function(){return debounce(function(event){var isDisabled=disableWhen&&disableWhen();if(!isDisabled){var node=event.currentTarget;if(event.clientX===0&&event.clientY===0){var _node$getBoundingClie=node.getBoundingClientRect(),left=_node$getBoundingClie.left,width=_node$getBoundingClie.width,top=_node$getBoundingClie.top,height=_node$getBoundingClie.height;var x=left+width/2;var y=top+height/2;for(var i=0;i<numberOfParticles;i+=1){createParticle(x,y,imgSrc,particleOptions);}}else{for(var _i=0;_i<numberOfParticles;_i+=1){createParticle(event.clientX,event.clientY+window.scrollY,imgSrc,particleOptions);}}}},debounceDuration,{leading:true});},[debounceDuration,numberOfParticles,imgSrc,disableWhen,particleOptions]);var listener=makeListener();var initialize=useCallback(function(){if(selector){document.querySelectorAll(selector).forEach(function(element){element.addEventListener(\"click\",listener);});}else{document.addEventListener(\"click\",listener);}},[selector,listener]);var teardown=useCallback(function(){if(selector){document.querySelectorAll(selector).forEach(function(element){element.removeEventListener(\"click\",listener);});}else{document.removeEventListener(\"click\",listener);}},[selector,listener]);useEffect(function(){initialize();return function(){return teardown();};},[initialize,teardown]);return{initialize:initialize,teardown:teardown};};export default useParticleBurst;","map":{"version":3,"sources":["C:/Users/yupoh/Desktop/cotton-frontend/src/uikit/hooks/useParticleBurst.ts"],"names":["useCallback","useEffect","debounce","defaultParticleOptions","size","distance","createParticle","x","y","imgSrc","options","particle","document","createElement","body","appendChild","width","Math","floor","random","height","destinationX","destinationY","rotation","delay","style","backgroundRepeat","backgroundSize","backgroundImage","left","top","opacity","pointerEvents","position","animation","animate","transform","duration","easing","onfinish","remove","defaultOptions","numberOfParticles","debounceDuration","particleOptions","useParticleBurst","selector","disableWhen","makeListener","event","isDisabled","node","currentTarget","clientX","clientY","getBoundingClientRect","i","window","scrollY","leading","listener","initialize","querySelectorAll","forEach","element","addEventListener","teardown","removeEventListener"],"mappings":"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","sourcesContent":["import { useCallback, useEffect } from \"react\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\ntype ParticleOptions = {\r\n  size?: number;\r\n  distance?: number;\r\n};\r\n\r\nconst defaultParticleOptions = {\r\n  size: 30,\r\n  distance: 500,\r\n};\r\n\r\nconst createParticle = (x: number, y: number, imgSrc: string, options: ParticleOptions = {}) => {\r\n  const { size, distance } = { ...defaultParticleOptions, ...options };\r\n\r\n  const particle = document.createElement(\"particle\");\r\n  document.body.appendChild(particle);\r\n\r\n  const width = Math.floor(Math.random() * size + 8);\r\n  const height = width;\r\n  const destinationX = (Math.random() - 0.5) * distance;\r\n  const destinationY = (Math.random() - 0.5) * distance;\r\n  const rotation = Math.random() * 520;\r\n  const delay = Math.random() * 200;\r\n\r\n  particle.style.backgroundRepeat = \"no-repeat\";\r\n  particle.style.backgroundSize = \"contain\";\r\n  particle.style.backgroundImage = `url(${imgSrc})`;\r\n  particle.style.left = \"0\";\r\n  particle.style.top = \"0\";\r\n  particle.style.opacity = \"0\";\r\n  particle.style.pointerEvents = \"none\";\r\n  particle.style.position = \"fixed\";\r\n  particle.style.width = `${width}px`;\r\n  particle.style.height = `${height}px`;\r\n\r\n  const animation = particle.animate(\r\n    [\r\n      {\r\n        transform: `translate(-50%, -50%) translate(${x}px, ${y}px) rotate(0deg)`,\r\n        opacity: 1,\r\n      },\r\n      {\r\n        transform: `translate(-50%, -50%) translate(${x + destinationX}px, ${\r\n          y + destinationY\r\n        }px) rotate(${rotation}deg)`,\r\n        opacity: 0,\r\n      },\r\n    ],\r\n    {\r\n      duration: Math.random() * 1000 + 5000,\r\n      easing: \"cubic-bezier(0, .9, .57, 1)\",\r\n      delay,\r\n    }\r\n  );\r\n\r\n  animation.onfinish = () => {\r\n    particle.remove();\r\n  };\r\n};\r\n\r\ntype Options = {\r\n  imgSrc: string;\r\n  selector?: string;\r\n  numberOfParticles?: number;\r\n  debounceDuration?: number;\r\n  disableWhen?: () => boolean;\r\n  particleOptions?: ParticleOptions;\r\n};\r\n\r\nconst defaultOptions = {\r\n  numberOfParticles: 30,\r\n  debounceDuration: 200,\r\n  particleOptions: {},\r\n};\r\n\r\n/**\r\n * @see https://css-tricks.com/playing-with-particles-using-the-web-animations-api/\r\n */\r\nconst useParticleBurst = (options: Options): { initialize: () => void; teardown: () => void } => {\r\n  const { selector, numberOfParticles, debounceDuration, imgSrc, disableWhen, particleOptions } = {\r\n    ...defaultOptions,\r\n    ...options,\r\n  };\r\n\r\n  const makeListener = useCallback(\r\n    () =>\r\n      debounce(\r\n        (event: MouseEvent) => {\r\n          const isDisabled = disableWhen && disableWhen();\r\n\r\n          if (!isDisabled) {\r\n            const node = event.currentTarget as HTMLElement;\r\n\r\n            if (event.clientX === 0 && event.clientY === 0) {\r\n              const { left, width, top, height } = node.getBoundingClientRect();\r\n              const x = left + width / 2;\r\n              const y = top + height / 2;\r\n\r\n              for (let i = 0; i < numberOfParticles; i += 1) {\r\n                createParticle(x, y, imgSrc, particleOptions);\r\n              }\r\n            } else {\r\n              for (let i = 0; i < numberOfParticles; i += 1) {\r\n                createParticle(event.clientX, event.clientY + window.scrollY, imgSrc, particleOptions);\r\n              }\r\n            }\r\n          }\r\n        },\r\n        debounceDuration,\r\n        { leading: true }\r\n      ),\r\n    [debounceDuration, numberOfParticles, imgSrc, disableWhen, particleOptions]\r\n  );\r\n  const listener = makeListener();\r\n\r\n  const initialize = useCallback(() => {\r\n    if (selector) {\r\n      document.querySelectorAll<HTMLElement>(selector).forEach((element) => {\r\n        element.addEventListener(\"click\", listener);\r\n      });\r\n    } else {\r\n      document.addEventListener(\"click\", listener);\r\n    }\r\n  }, [selector, listener]);\r\n\r\n  const teardown = useCallback(() => {\r\n    if (selector) {\r\n      document.querySelectorAll<HTMLElement>(selector).forEach((element) => {\r\n        element.removeEventListener(\"click\", listener);\r\n      });\r\n    } else {\r\n      document.removeEventListener(\"click\", listener);\r\n    }\r\n  }, [selector, listener]);\r\n\r\n  useEffect(() => {\r\n    initialize();\r\n    return () => teardown();\r\n  }, [initialize, teardown]);\r\n\r\n  return { initialize, teardown };\r\n};\r\n\r\nexport default useParticleBurst;\r\n"]},"metadata":{},"sourceType":"module"}