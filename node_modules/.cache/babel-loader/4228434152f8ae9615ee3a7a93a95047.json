{"ast":null,"code":"import _objectSpread from\"C:/Users/yupoh/Desktop/cotton-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/yupoh/Desktop/cotton-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"C:/Users/yupoh/Desktop/cotton-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _taggedTemplateLiteral from\"C:/Users/yupoh/Desktop/cotton-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useEffect,useRef,useState}from\"react\";import styled from\"styled-components\";import observerOptions from\"./options\";import Wrapper from\"./Wrapper\";import{jsx as _jsx}from\"react/jsx-runtime\";var StyledImage=styled.img(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  max-width: 100%;\\n\"])));var Placeholder=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n\"])));var Image=function Image(_ref){var src=_ref.src,alt=_ref.alt,otherProps=_objectWithoutProperties(_ref,[\"src\",\"alt\"]);var imgRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoaded=_useState2[0],setIsLoaded=_useState2[1];useEffect(function(){var img=imgRef.current;var observer=new IntersectionObserver(function(entries){entries.forEach(function(entry){var isIntersecting=entry.isIntersecting;if(isIntersecting){setIsLoaded(true);observer.disconnect();}});},observerOptions);observer.observe(img);return function(){observer.disconnect();};},[src]);return/*#__PURE__*/_jsx(Wrapper,_objectSpread(_objectSpread({ref:imgRef},otherProps),{},{children:isLoaded?/*#__PURE__*/_jsx(StyledImage,{src:src,alt:alt}):/*#__PURE__*/_jsx(Placeholder,{})}));};export default Image;","map":{"version":3,"sources":["C:/Users/yupoh/Desktop/cotton-frontend/src/uikit/components/Image/Image.tsx"],"names":["React","useEffect","useRef","useState","styled","observerOptions","Wrapper","StyledImage","img","Placeholder","div","Image","src","alt","otherProps","imgRef","isLoaded","setIsLoaded","current","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","disconnect","observe"],"mappings":"4rBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,MAA3B,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,eAAP,KAA4B,WAA5B,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,C,2CAGA,GAAMC,CAAAA,WAAW,CAAGH,MAAM,CAACI,GAAV,sKAAjB,CASA,GAAMC,CAAAA,WAAW,CAAGL,MAAM,CAACM,GAAV,oJAAjB,CAQA,GAAMC,CAAAA,KAA2B,CAAG,QAA9BA,CAAAA,KAA8B,MAAiC,IAA9BC,CAAAA,GAA8B,MAA9BA,GAA8B,CAAzBC,GAAyB,MAAzBA,GAAyB,CAAjBC,UAAiB,8CACnE,GAAMC,CAAAA,MAAM,CAAGb,MAAM,CAAC,IAAD,CAArB,CACA,cAAgCC,QAAQ,CAAC,KAAD,CAAxC,wCAAOa,QAAP,eAAiBC,WAAjB,eAEAhB,SAAS,CAAC,UAAM,CACd,GAAMO,CAAAA,GAAG,CAAIO,MAAM,CAACG,OAApB,CACA,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,oBAAJ,CAAyB,SAACC,OAAD,CAAa,CACrDA,OAAO,CAACC,OAAR,CAAgB,SAACC,KAAD,CAAW,CACzB,GAAQC,CAAAA,cAAR,CAA2BD,KAA3B,CAAQC,cAAR,CACA,GAAIA,cAAJ,CAAoB,CAClBP,WAAW,CAAC,IAAD,CAAX,CACAE,QAAQ,CAACM,UAAT,GACD,CACF,CAND,EAOD,CARgB,CAQdpB,eARc,CAAjB,CASAc,QAAQ,CAACO,OAAT,CAAiBlB,GAAjB,EAEA,MAAO,WAAM,CACXW,QAAQ,CAACM,UAAT,GACD,CAFD,CAGD,CAhBQ,CAgBN,CAACb,GAAD,CAhBM,CAAT,CAkBA,mBACE,KAAC,OAAD,8BAAS,GAAG,CAAEG,MAAd,EAA0BD,UAA1B,eACGE,QAAQ,cAAG,KAAC,WAAD,EAAa,GAAG,CAAEJ,GAAlB,CAAuB,GAAG,CAAEC,GAA5B,EAAH,cAAyC,KAAC,WAAD,IADpD,GADF,CAKD,CA3BD,CA6BA,cAAeF,CAAAA,KAAf","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport observerOptions from \"./options\";\r\nimport Wrapper from \"./Wrapper\";\r\nimport { ImageProps } from \"./types\";\r\n\r\nconst StyledImage = styled.img`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  max-width: 100%;\r\n`;\r\n\r\nconst Placeholder = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\n\r\nconst Image: React.FC<ImageProps> = ({ src, alt, ...otherProps }) => {\r\n  const imgRef = useRef(null);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const img = (imgRef.current as unknown) as HTMLImageElement;\r\n    const observer = new IntersectionObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        const { isIntersecting } = entry;\r\n        if (isIntersecting) {\r\n          setIsLoaded(true);\r\n          observer.disconnect();\r\n        }\r\n      });\r\n    }, observerOptions);\r\n    observer.observe(img);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n    };\r\n  }, [src]);\r\n\r\n  return (\r\n    <Wrapper ref={imgRef} {...otherProps}>\r\n      {isLoaded ? <StyledImage src={src} alt={alt} /> : <Placeholder />}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Image;\r\n"]},"metadata":{},"sourceType":"module"}