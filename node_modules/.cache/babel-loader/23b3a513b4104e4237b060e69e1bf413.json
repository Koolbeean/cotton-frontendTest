{"ast":null,"code":"import _slicedToArray from\"C:/Users/yupoh/Desktop/cotton-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/Users/yupoh/Desktop/cotton-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{createContext,useState}from\"react\";import styled from\"styled-components\";import Overlay from\"../../components/Overlay/Overlay\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModalWrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  z-index: \",\";\\n\"])),function(_ref){var theme=_ref.theme;return theme.zIndices.modal-1;});export var Context=/*#__PURE__*/createContext({onPresent:function onPresent(){return null;},onDismiss:function onDismiss(){return null;},setCloseOnOverlayClick:function setCloseOnOverlayClick(){return true;}});var ModalProvider=function ModalProvider(_ref2){var children=_ref2.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),modalNode=_useState4[0],setModalNode=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),closeOnOverlayClick=_useState6[0],setCloseOnOverlayClick=_useState6[1];var handlePresent=function handlePresent(node){setModalNode(node);setIsOpen(true);};var handleDismiss=function handleDismiss(){setModalNode(undefined);setIsOpen(false);};var handleOverlayDismiss=function handleOverlayDismiss(){if(closeOnOverlayClick){handleDismiss();}};return/*#__PURE__*/_jsxs(Context.Provider,{value:{onPresent:handlePresent,onDismiss:handleDismiss,setCloseOnOverlayClick:setCloseOnOverlayClick},children:[isOpen&&/*#__PURE__*/_jsxs(ModalWrapper,{children:[/*#__PURE__*/_jsx(Overlay,{show:true,onClick:handleOverlayDismiss}),/*#__PURE__*/React.isValidElement(modalNode)&&/*#__PURE__*/React.cloneElement(modalNode,{onDismiss:handleDismiss})]}),children]});};export default ModalProvider;","map":{"version":3,"sources":["C:/Users/yupoh/Desktop/cotton-frontend/src/uikit/widgets/Modal/ModalContext.tsx"],"names":["React","createContext","useState","styled","Overlay","ModalWrapper","div","theme","zIndices","modal","Context","onPresent","onDismiss","setCloseOnOverlayClick","ModalProvider","children","isOpen","setIsOpen","modalNode","setModalNode","closeOnOverlayClick","handlePresent","node","handleDismiss","undefined","handleOverlayDismiss","isValidElement","cloneElement"],"mappings":"8VAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,CAA+BC,QAA/B,KAA+C,OAA/C,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kCAApB,C,wFASA,GAAMC,CAAAA,YAAY,CAAGF,MAAM,CAACG,GAAV,2PAUL,kBAAGC,CAAAA,KAAH,MAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACC,QAAN,CAAeC,KAAf,CAAuB,CAAtC,EAVK,CAAlB,CAaA,MAAO,IAAMC,CAAAA,OAAO,cAAGT,aAAa,CAAgB,CAClDU,SAAS,CAAE,2BAAM,KAAN,EADuC,CAElDC,SAAS,CAAE,2BAAM,KAAN,EAFuC,CAGlDC,sBAAsB,CAAE,wCAAM,KAAN,EAH0B,CAAhB,CAA7B,CAMP,GAAMC,CAAAA,aAAuB,CAAG,QAA1BA,CAAAA,aAA0B,OAAkB,IAAfC,CAAAA,QAAe,OAAfA,QAAe,CAChD,cAA4Bb,QAAQ,CAAC,KAAD,CAApC,wCAAOc,MAAP,eAAeC,SAAf,eACA,eAAkCf,QAAQ,EAA1C,yCAAOgB,SAAP,eAAkBC,YAAlB,eACA,eAAsDjB,QAAQ,CAAC,IAAD,CAA9D,yCAAOkB,mBAAP,eAA4BP,sBAA5B,eAEA,GAAMQ,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,IAAD,CAA2B,CAC/CH,YAAY,CAACG,IAAD,CAAZ,CACAL,SAAS,CAAC,IAAD,CAAT,CACD,CAHD,CAKA,GAAMM,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1BJ,YAAY,CAACK,SAAD,CAAZ,CACAP,SAAS,CAAC,KAAD,CAAT,CACD,CAHD,CAKA,GAAMQ,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CACjC,GAAIL,mBAAJ,CAAyB,CACvBG,aAAa,GACd,CACF,CAJD,CAMA,mBACE,MAAC,OAAD,CAAS,QAAT,EACE,KAAK,CAAE,CACLZ,SAAS,CAAEU,aADN,CAELT,SAAS,CAAEW,aAFN,CAGLV,sBAAsB,CAAtBA,sBAHK,CADT,WAOGG,MAAM,eACL,MAAC,YAAD,yBACE,KAAC,OAAD,EAAS,IAAI,KAAb,CAAc,OAAO,CAAES,oBAAvB,EADF,CAEG,aAAAzB,KAAK,CAAC0B,cAAN,CAAqBR,SAArB,gBACClB,KAAK,CAAC2B,YAAN,CAAmBT,SAAnB,CAA8B,CAC5BN,SAAS,CAAEW,aADiB,CAA9B,CAHJ,GARJ,CAgBGR,QAhBH,GADF,CAoBD,CAzCD,CA2CA,cAAeD,CAAAA,aAAf","sourcesContent":["import React, { createContext, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Overlay from \"../../components/Overlay/Overlay\";\r\nimport { Handler } from \"./types\";\r\n\r\ninterface ModalsContext {\r\n  onPresent: (node: React.ReactNode, key?: string) => void;\r\n  onDismiss: Handler;\r\n  setCloseOnOverlayClick: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst ModalWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  z-index: ${({ theme }) => theme.zIndices.modal - 1};\r\n`;\r\n\r\nexport const Context = createContext<ModalsContext>({\r\n  onPresent: () => null,\r\n  onDismiss: () => null,\r\n  setCloseOnOverlayClick: () => true,\r\n});\r\n\r\nconst ModalProvider: React.FC = ({ children }) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [modalNode, setModalNode] = useState<React.ReactNode>();\r\n  const [closeOnOverlayClick, setCloseOnOverlayClick] = useState(true);\r\n\r\n  const handlePresent = (node: React.ReactNode) => {\r\n    setModalNode(node);\r\n    setIsOpen(true);\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setModalNode(undefined);\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const handleOverlayDismiss = () => {\r\n    if (closeOnOverlayClick) {\r\n      handleDismiss();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Context.Provider\r\n      value={{\r\n        onPresent: handlePresent,\r\n        onDismiss: handleDismiss,\r\n        setCloseOnOverlayClick,\r\n      }}\r\n    >\r\n      {isOpen && (\r\n        <ModalWrapper>\r\n          <Overlay show onClick={handleOverlayDismiss} />\r\n          {React.isValidElement(modalNode) &&\r\n            React.cloneElement(modalNode, {\r\n              onDismiss: handleDismiss,\r\n            })}\r\n        </ModalWrapper>\r\n      )}\r\n      {children}\r\n    </Context.Provider>\r\n  );\r\n};\r\n\r\nexport default ModalProvider;\r\n"]},"metadata":{},"sourceType":"module"}